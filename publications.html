---
layout: page
title: Publications
category: page
main_nav: true
permalink: /publications/
---

<div id="publications-list">
  <p>Loading publications from ORCID...</p>
</div>

<script>
const ORCID_ID = "0000-0001-8746-8754";
const container = document.getElementById('publications-list');

if (!ORCID_ID) {
  container.innerHTML = '<p>ORCID ID not configured in _config.yml</p>';
} else {
  fetch(`https://pub.orcid.org/v3.0/${ORCID_ID}/works`, {
    method: 'GET',
    headers: {
      'Accept': 'application/vnd.orcid+json'
    }
  })
  .then(response => {
    if (!response.ok) {
      throw new Error(`HTTP ${response.status}: ${response.statusText}`);
    }
    return response.json();
  })
  .then(data => {
    if (!data?.group || !Array.isArray(data.group)) {
      container.innerHTML = '<p>No publication groups found.</p>';
      return;
    }

    let html = '<ul style="list-style: none; padding-left: 0;">';
    let foundAny = false;

    data.group.forEach(group => {
      // ðŸ”’ Safely access group.works
      if (!group?.works || !Array.isArray(group.works) || group.works.length === 0) {
        return; // skip malformed group
      }

      const workSummary = group.works[0];
      if (!workSummary?.work) {
        return; // skip if no work object
      }

      const work = workSummary.work;
      const title = work.title?.title?.value || 'Untitled';
      const year = work.publication_date?.year?.value || 'n.d.';
      const url = work.url?.value || '#';
      
      const authors = work.contributors?.contributor
        ? work.contributors.contributor
            .map(c => c.contribution?.credit_name?.value || 'Unknown')
            .join(', ')
        : 'Unknown authors';
      
      const journal = work.journal_title?.value || '';

      html += `
        <li style="margin-bottom: 1.5em; padding-bottom: 1em; border-bottom: 1px solid #eee;">
          <strong><a href="${url}" target="_blank" rel="noopener">${title}</a></strong> (${year})<br>
          <em>${authors}</em>${journal ? `<br><small>${journal}</small>` : ''}
        </li>
      `;
      foundAny = true;
    });

    if (!foundAny) {
      container.innerHTML = '<p>No valid publications found in ORCID record.</p>';
    } else {
      html += '</ul>';
      container.innerHTML = html;
    }
  })
  .catch(err => {
    console.error('Publication loading error:', err);
    container.innerHTML = `
      <p>Failed to load publications.</p>
      <p><small>Error: ${err.message}</small></p>
    `;
  });
}
</script>
